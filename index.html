<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Copy Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.js"></script>
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg%20fill%3D%22%23FFFFFF%22%20width%3D%22800px%22%20height%3D%22800px%22%20viewBox%3D%220%200%2024%2024%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%2C7%20L8%2C8%20L6.5%2C8%20C5.67157288%2C8%205%2C8.67157288%205%2C9.5%20L5%2C18.5%20C5%2C19.3284271%205.67157288%2C20%206.5%2C20%20L13.5%2C20%20C14.3284271%2C20%2015%2C19.3284271%2015%2C18.5%20L15%2C17%20L16%2C17%20L16%2C18.5%20C16%2C19.8807119%2014.8807119%2C21%2013.5%2C21%20L6.5%2C21%20C5.11928813%2C21%204%2C19.8807119%204%2C18.5%20L4%2C9.5%20C4%2C8.11928813%205.11928813%2C7%206.5%2C7%20L8%2C7%20Z%20M16%2C4%20L10.5%2C4%20C9.67157288%2C4%209%2C4.67157288%209%2C5.5%20L9%2C14.5%20C9%2C15.3284271%209.67157288%2C16%2010.5%2C16%20L17.5%2C16%20C18.3284271%2C16%2019%2C15.3284271%2019%2C14.5%20L19%2C7%20L16.5%2C7%20C16.2238576%2C7%2016%2C6.77614237%2016%2C6.5%20L16%2C4%20Z%20M20%2C6.52797748%20L20%2C14.5%20C20%2C15.8807119%2018.8807119%2C17%2017.5%2C17%20L10.5%2C17%20C9.11928813%2C17%208%2C15.8807119%208%2C14.5%20L8%2C5.5%20C8%2C4.11928813%209.11928813%2C3%2010.5%2C3%20L16.4720225%2C3%20C16.6047688%2C2.99158053%2016.7429463%2C3.03583949%2016.8535534%2C3.14644661%20L19.8535534%2C6.14644661%20C19.9641605%2C6.25705373%2020.0084195%2C6.39523125%2020%2C6.52797748%20Z%20M17%2C6%20L18.2928932%2C6%20L17%2C4.70710678%20L17%2C6%20Z%20M11.5%2C13%20C11.2238576%2C13%2011%2C12.7761424%2011%2C12.5%20C11%2C12.2238576%2011.2238576%2C12%2011.5%2C12%20L13.5%2C12%20C13.7761424%2C12%2014%2C12.2238576%2014%2C12.5%20C14%2C12.7761424%2013.7761424%2C13%2013.5%2C13%20L11.5%2C13%20Z%20M11.5%2C11%20C11.2238576%2C11%2011%2C10.7761424%2011%2C10.5%20C11%2C10.2238576%2011.2238576%2C10%2011.5%2C10%20L16.5%2C10%20C16.7761424%2C10%2017%2C10.2238576%2017%2C10.5%20C17%2C10.7761424%2016.7761424%2C11%2016.5%2C11%20L11.5%2C11%20Z%20M11.5%2C9%20C11.2238576%2C9%2011%2C8.77614237%2011%2C8.5%20C11%2C8.22385763%2011.2238576%2C8%2011.5%2C8%20L16.5%2C8%20C16.7761424%2C8%2017%2C8.22385763%2017%2C8.5%20C17%2C8.77614237%2016.7761424%2C9%2016.5%2C9%20L11.5%2C9%20Z%22%20%2F%3E%3C%2Fsvg%3E"
    />
    <style>
      .content-center {
        margin-left: auto;
        margin-right: auto;
      }
    </style>
  </head>
  <body class="bg-gray-900 text-white font-sans pt-2.5">
    <div class="container mx-2 p-1">
      <!-- Main Content Area -->
      <div class="grid grid-cols-3 gap-1">
        <!-- Left Column for Content -->
        <div id="content-container" class="col-span-1 ml-0"></div>

        <!-- Empty Spacer Columns -->
        <div class="col-span-2"></div>
      </div>

      <!-- Add Button -->
      <button
        class="bg-green-600 hover:bg-green-500 text-white py-2 px-4 rounded fixed top-4 right-4"
        onclick="openModal()"
      >
        Add New
      </button>

      <!-- Alignment Toggle Button -->
      <button
        class="bg-yellow-600 hover:bg-yellow-500 text-white py-2 px-4 rounded fixed top-4 right-32"
        onclick="toggleAlignment()"
      >
        Toggle Alignment
      </button>
    </div>

    <div class="fixed bottom-4 right-4 flex flex-col space-y-2">
      <!-- Export button -->
      <button
        class="bg-sky-500 hover:bg-sky-400 text-white py-2 px-4 rounded"
        onclick="exportData()"
      >
        Export
      </button>
      <!-- Import button -->
      <button
        class="bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded"
        onclick="openImportModal()"
      >
        Import
      </button>
    </div>

    <!-- Import Modal -->
    <div
      id="import-modal"
      class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center hidden"
    >
      <div class="bg-gray-800 p-4 rounded-lg max-w-lg w-full">
        <h2 class="text-2xl mb-4 text-center">Import JSON Data</h2>
        <textarea
          id="import-json"
          class="w-full p-3 mb-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 ml-0"
          placeholder="Paste your JSON here"
        ></textarea>
        <div class="flex justify-end">
          <button
            class="bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded"
            onclick="importData()"
          >
            Import
          </button>
          <button
            class="bg-red-600 hover:bg-red-500 text-white py-2 px-4 rounded ml-2"
            onclick="closeImportModal()"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div
      id="modal"
      class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center hidden"
    >
      <div class="bg-gray-800 p-4 rounded-lg max-w-lg w-full">
        <h2 class="text-2xl mb-4 text-center">Add New Item</h2>
        <input
          id="new-item"
          type="text"
          placeholder="Enter email or location"
          class="w-full p-3 mb-4 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 ml-0"
        />
        <div class="flex justify-end">
          <button
            class="bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded"
            onclick="addItem()"
          >
            Save
          </button>
          <button
            class="bg-red-600 hover:bg-red-500 text-white py-2 px-4 rounded ml-2"
            onclick="closeModal()"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <script>
      // Load Data from Local Storage or Initialize with Default Data
      let data = JSON.parse(localStorage.getItem("data")) || [];
      let alignCenter =
        JSON.parse(localStorage.getItem("alignCenter")) || false;

      // Toggle Alignment and save to localStorage
      function toggleAlignment() {
        alignCenter = !alignCenter;
        localStorage.setItem("alignCenter", JSON.stringify(alignCenter)); // Save state
        renderData();
      }

      // Save Data to Local Storage
      function saveData() {
        localStorage.setItem("data", JSON.stringify(data));
      }

      // Render the Data
      function renderData() {
        const container = document.getElementById("content-container");
        container.innerHTML = "";

        // Apply alignment based on the stored state
        if (alignCenter) {
          container.classList.add("content-center");
        } else {
          container.classList.remove("content-center");
        }

        // Render the rest of the items
        data.forEach((item, index) => {
          const div = document.createElement("div");
          div.className =
            "flex items-center justify-between bg-gray-800 p-4 rounded-lg mb-4 ml-0 max-w-full min-w-[506px]";
          div.innerHTML = `
      <div class="flex items-center overflow-x-auto whitespace-nowrap max-w-full pr-4">
        <h3 class="text-lg">
          ${index + 1}) ${item.value} <!-- Added number before each value -->
        </h3>
      </div>
      <div class="flex items-center ml-8 space-x-2 flex-shrink-0 w-[150px]">
        <button
          class="bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded flex items-center"
          onclick="copyText('${item.value}')"
          aria-label="Copy"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-copy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg>
        </button>
        <button
          class="bg-red-600 hover:bg-red-500 text-white py-2 px-4 rounded flex items-center"
          onclick="removeItem(${index})"
          aria-label="Remove"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>
        </button>
      </div>
    `;
          container.appendChild(div);
        });
      }

      // Copy Text to Clipboard
      function copyText(text) {
        displayAlertSuccess(`copied: ${text}`);
        navigator.clipboard
          .writeText(text)
          .then(() => console.log(`copied: ${text}`))
          .catch((err) => console.error("Failed to copy text:", err));
      }

      // Display Success Alert
      function displayAlertSuccess(message) {
        new Noty({
          text: message,
          type: "success",
          layout: "topCenter",
          timeout: 2000,
          theme: "metroui",
          progressBar: false,
        }).show();
      }

      // Remove Item
      function removeItem(index) {
        data.splice(index, 1);
        saveData();
        renderData();
        displayAlertSuccess("item removed successfully");
      }

      // Modal Functions
      function openModal() {
        const modal = document.getElementById("modal");
        const input = document.getElementById("new-item");
        modal.classList.remove("hidden");

        input.value = "";
        input.focus();
      }

      function closeModal() {
        const modal = document.getElementById("modal");
        modal.classList.add("hidden");
      }

      // Add New Item
      function addItem() {
        const newValue = document.getElementById("new-item").value.trim();

        if (!newValue) {
          displayAlertError("please enter a value!");
          return;
        }
        const type = newValue.includes("@") ? "email" : "location";
        data.push({ type, value: newValue });
        saveData();
        renderData();
        closeModal();
      }

      function exportData() {
        const dataToExport = JSON.stringify(data);
        navigator.clipboard
          .writeText(dataToExport)
          .then(() => displayAlertSuccess("data exported to clipboard"))
          .catch((err) => console.error("failed to copy data:", err));
      }

      function openImportModal() {
        const modal = document.getElementById("import-modal");
        modal.classList.remove("hidden");
      }

      function closeImportModal() {
        const modal = document.getElementById("import-modal");
        modal.classList.add("hidden");
      }

      function importData() {
        const jsonData = document.getElementById("import-json").value.trim();
        try {
          const importedData = JSON.parse(jsonData);
          if (Array.isArray(importedData)) {
            data = importedData;
            saveData();
            renderData();
            closeImportModal();
            displayAlertSuccess("data imported successfully");
          } else {
            displayAlertError("invalid JSON format");
            return;
          }
        } catch (err) {
          displayAlertError("invalid JSON format");
          return;
        }
      }

      function displayAlertError(message) {
        new Noty({
          text: message,
          type: "error",
          layout: "topCenter",
          timeout: 2000,
          theme: "metroui",
          progressBar: false,
        }).show();
      }

      let inputValue = "";
      let typingTimeout = null;

      window.addEventListener("keydown", function (event) {
        const key = event.key;
        if (modal.classList.contains("hidden")) {
          if (key >= "0" && key <= "9") {
            inputValue += key;

            clearTimeout(typingTimeout);

            typingTimeout = setTimeout(() => {
              const index = parseInt(inputValue) - 1;

              if (index >= 0 && index < data.length) {
                copyText(data[index].value);
              }

              inputValue = "";
            }, 500);
          }

          if (key === "a") {
            event.preventDefault();
            const modal = document.getElementById("modal");
            openModal();
          }
        }
      });

      renderData();
    </script>
  </body>
</html>
